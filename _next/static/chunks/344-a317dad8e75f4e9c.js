"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{1344:function(e,t,r){r.d(t,{default:function(){return f}});var a=r(7437),i=r(2265),n=r(429),o=r(5095),l=r(7648),s=r(3145),c=r(2369),d=r(7692),u=r(2489),h=r(6840),p=r(6281),m=r(4114),x=r(5748);let b=[{href:"/",label:"Home"},{href:"/trade-in",label:"Trade In"},{href:"#how-it-works",label:"How It Works"},{href:"#faq",label:"FAQ"}];function f(){var e;let{user:t,isAuthenticated:r}=(0,p.a)(),[f,g]=(0,i.useState)(!1),[y,v]=(0,i.useState)(!1),[w,j]=(0,i.useState)(!1),N=async()=>{try{await (0,m.w7)(),v(!1)}catch(e){console.error("Error signing out:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsx)(l.default,{href:"/",className:"flex items-center",children:(0,a.jsx)(s.default,{src:"/images/worthyten-logo.svg",alt:"WorthyTEN",width:160,height:60,className:"h-10 md:h-12 w-auto object-contain",priority:!0})}),(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[b.map(e=>(0,a.jsx)(l.default,{href:e.href,className:"text-gray-700 hover:text-brand-blue-900 transition-colors font-medium",children:e.label},e.href)),r?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>v(!y),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition-colors",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:(null==t?void 0:null===(e=t.phoneNumber)||void 0===e?void 0:e.slice(-4))||"User"})]}),y&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("div",{className:"px-4 py-2 text-sm text-gray-600 border-b border-gray-200",children:null==t?void 0:t.phoneNumber}),(0,a.jsxs)("button",{onClick:N,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50 flex items-center gap-2 transition-colors",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Logout"]})]})})]}):(0,a.jsx)("button",{onClick:()=>g(!0),className:"px-6 py-2.5 bg-brand-lime text-brand-blue-900 rounded-lg font-semibold hover:bg-brand-lime-400 transition-all shadow-md hover:shadow-lg",children:"Login"})]}),(0,a.jsx)("button",{onClick:()=>j(!w),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Toggle menu",children:w?(0,a.jsx)(u.Z,{className:"w-6 h-6 text-gray-700"}):(0,a.jsx)(h.Z,{className:"w-6 h-6 text-gray-700"})})]})}),(0,a.jsx)(o.M,{children:w&&(0,a.jsx)(n.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"md:hidden bg-white border-t border-gray-200 overflow-hidden",children:(0,a.jsxs)("div",{className:"px-4 py-4 space-y-2",children:[b.map(e=>(0,a.jsx)(l.default,{href:e.href,onClick:()=>j(!1),className:"block px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-100 font-medium transition-colors",children:e.label},e.href)),(0,a.jsx)("div",{className:"pt-2 border-t border-gray-200",children:r?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-600",children:["Logged in as ",null==t?void 0:t.phoneNumber]}),(0,a.jsxs)("button",{onClick:()=>{N(),j(!1)},className:"w-full px-4 py-3 text-left text-red-600 hover:bg-gray-50 rounded-lg flex items-center gap-2 font-medium",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),"Logout"]})]}):(0,a.jsx)("button",{onClick:()=>{g(!0),j(!1)},className:"w-full px-4 py-3 bg-brand-lime text-brand-blue-900 rounded-lg font-semibold text-center",children:"Login"})})]})})})]}),f&&(0,a.jsx)(x.Z,{onSuccess:()=>{g(!1)},onClose:()=>g(!1)})]})}},5748:function(e,t,r){r.d(t,{Z:function(){return p}});var a=r(7437),i=r(2265),n=r(429),o=r(5095),l=r(2489),s=r(3041),c=r(6858),d=r(5302),u=r(4114),h=r(6281);function p(e){let{onSuccess:t,onClose:r}=e,{user:p}=(0,h.a)(),[m,x]=(0,i.useState)("phone"),[b,f]=(0,i.useState)(""),[g,y]=(0,i.useState)(["","","","","",""]),[v,w]=(0,i.useState)(!1),[j,N]=(0,i.useState)(""),[E,P]=(0,i.useState)(null),C=(0,i.useRef)(null),A=(0,i.useRef)([]);(0,i.useEffect)(()=>{let e=setTimeout(()=>{try{if(window.recaptchaVerifier){try{let e=window.recaptchaVerifier;e&&"function"==typeof e.clear&&e.clear()}catch(e){}delete window.recaptchaVerifier}let e=(0,u.Ew)("recaptcha-container");C.current=e}catch(e){console.error("Error setting up reCAPTCHA:",e)}},300);return()=>{if(clearTimeout(e),C.current){try{"function"==typeof C.current.clear&&C.current.clear()}catch(e){(null==e?void 0:e.code)!=="auth/internal-error"&&console.error("Error clearing reCAPTCHA:",e)}C.current=null}window.recaptchaVerifier&&delete window.recaptchaVerifier}},[]),(0,i.useEffect)(()=>{p&&(x("otp"),N(""))},[p]);let T=e=>{let t=e.replace(/\D/g,"");return t.length,t},k=async e=>{e.preventDefault(),N(""),w(!0);try{let e=b.startsWith("+")?b:"+91".concat(b);if(!C.current){let e=(0,u.Ew)("recaptcha-container");C.current=e}let t=await (0,u.OA)(e,C.current);P(t),x("otp"),N("")}catch(e){N(e.message||"Failed to send OTP. Please try again.")}finally{w(!1)}},O=(e,t)=>{if(t.length>1||!/^\d*$/.test(t))return;let r=[...g];if(r[e]=t,y(r),t&&e<5){var a;null===(a=A.current[e+1])||void 0===a||a.focus()}},I=(e,t)=>{if("Backspace"===t.key&&!g[e]&&e>0){var r;null===(r=A.current[e-1])||void 0===r||r.focus()}},S=e=>{e.preventDefault();let t=e.clipboardData.getData("text").slice(0,6).split("").filter(e=>/^\d$/.test(e));if(6===t.length){var r;y(t),null===(r=A.current[5])||void 0===r||r.focus()}},D=async e=>{e.preventDefault(),N(""),w(!0);try{let e=g.join("");if(6!==e.length){N("Please enter 6-digit OTP"),w(!1);return}if(!E){N("Session expired. Please request OTP again."),x("phone"),w(!1);return}await (0,u.qD)(E,e),N(""),t&&t()}catch(e){var r;N(e.message||"Invalid OTP. Please try again."),y(["","","","","",""]),null===(r=A.current[0])||void 0===r||r.focus()}finally{w(!1)}},F=async()=>{N(""),w(!0),y(["","","","","",""]);try{let e=b.startsWith("+")?b:"+91".concat(b);if(!C.current){let e=(0,u.Ew)("recaptcha-container");C.current=e}let t=await (0,u.OA)(e,C.current);P(t),N("")}catch(e){N(e.message||"Failed to resend OTP. Please try again.")}finally{w(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative w-full max-w-md bg-white rounded-xl shadow-2xl overflow-hidden",children:[r&&(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors z-10",children:(0,a.jsx)(l.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"p-6 md:p-8",children:[(0,a.jsx)("div",{id:"recaptcha-container"}),(0,a.jsx)(o.M,{mode:"wait",children:"phone"===m?(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"w-16 h-16 bg-gradient-to-br from-brand-blue-600 to-brand-lime rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(s.Z,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-brand-blue-900 mb-2",children:"Login with OTP"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Enter your phone number to receive OTP"})]}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"+91"}),(0,a.jsx)("input",{type:"tel",value:b,onChange:e=>f(T(e.target.value)),placeholder:"Enter your phone number",className:"w-full pl-16 pr-4 py-3 bg-white border-2 border-gray-200 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-lime focus:border-brand-lime",required:!0,maxLength:10})]})]}),j&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-sm",children:j}),(0,a.jsx)(n.E.button,{type:"submit",disabled:v||10!==b.length,className:"w-full py-4 bg-brand-lime text-brand-blue-900 rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-brand-lime-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:v?1:1.02},whileTap:{scale:v?1:.98},children:v?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,a.jsxs)(a.Fragment,{children:["Send OTP",(0,a.jsx)(c.Z,{className:"w-5 h-5"})]})})]})]},"phone"):(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"w-16 h-16 bg-gradient-to-br from-brand-lime to-brand-lime-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(d.Z,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-brand-blue-900 mb-2",children:"Enter OTP"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["We sent a 6-digit code to",(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-brand-blue-900 font-semibold",children:["+91 ",b]})]})]}),(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4 text-center",children:"Enter 6-digit OTP"}),(0,a.jsx)("div",{className:"flex gap-2 md:gap-3 justify-center",children:g.map((e,t)=>(0,a.jsx)("input",{ref:e=>{A.current[t]=e},type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>O(t,e.target.value),onKeyDown:e=>I(t,e),onPaste:0===t?S:void 0,className:"w-10 h-12 md:w-12 md:h-14 text-center text-xl md:text-2xl font-bold bg-white border-2 border-gray-200 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-brand-lime focus:border-brand-lime"},t))})]}),j&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-sm text-center",children:j}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(n.E.button,{type:"submit",disabled:v||g.some(e=>!e),className:"w-full py-4 bg-brand-lime text-brand-blue-900 rounded-xl font-semibold hover:bg-brand-lime-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:v?1:1.02},whileTap:{scale:v?1:.98},children:v?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mx-auto"}):"Verify OTP"}),(0,a.jsx)("button",{type:"button",onClick:F,disabled:v,className:"w-full py-3 text-brand-lime hover:text-brand-lime-400 transition-colors text-sm font-medium disabled:opacity-50",children:"Resend OTP"}),(0,a.jsx)("button",{type:"button",onClick:()=>{x("phone"),y(["","","","","",""]),N("")},className:"w-full py-3 text-gray-400 hover:text-gray-300 transition-colors text-sm",children:"Change Phone Number"})]})]})]},"otp")})]})]})})}},6281:function(e,t,r){r.d(t,{AuthProvider:function(){return l},a:function(){return s}});var a=r(7437),i=r(2265),n=r(4114);let o=(0,i.createContext)({user:null,loading:!0,isAuthenticated:!1});function l(e){let{children:t}=e,[r,l]=(0,i.useState)(null),[s,c]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=(0,n.yv)(e=>{l(e),c(!1)});return()=>e()},[]),(0,a.jsx)(o.Provider,{value:{user:r,loading:s,isAuthenticated:!!r},children:t})}function s(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4114:function(e,t,r){r.d(t,{Ew:function(){return l},OA:function(){return s},qD:function(){return c},w7:function(){return d},yv:function(){return u}});var a=r(3301),i=r(4257),n=r(4421);function o(){let e=i.I8;if(e||(e=(0,i.v0)()),!e)throw Error("Firebase auth is not initialized. Please refresh the page and try again.");return e}function l(){var e,t,r,i,n,l,s;let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"recaptcha-container",d=o();if(!d||!d.app)throw Error("Firebase Auth instance is not properly initialized");let u=window.recaptchaVerifier;if(u)try{u&&"function"==typeof u.clear&&(u.clear(),console.log("Cleared existing reCAPTCHA verifier"))}catch(e){(null==e?void 0:e.code)!=="auth/internal-error"&&console.warn("Error clearing existing reCAPTCHA verifier:",e)}finally{delete window.recaptchaVerifier}if(!document.getElementById(c)){let e=document.createElement("div");e.id=c,e.style.display="none",document.body.appendChild(e)}try{console.log("Creating RecaptchaVerifier with auth instance:",{appName:d.app.name,projectId:d.app.options.projectId,apiKey:(null===(e=d.app.options.apiKey)||void 0===e?void 0:e.substring(0,10))+"...",authDomain:d.app.options.authDomain});let t=new a.lI(d,c,{size:"invisible",callback:()=>{console.log("reCAPTCHA verified")},"expired-callback":()=>{console.error("reCAPTCHA expired")}});return window.recaptchaVerifier=t,console.log("RecaptchaVerifier created successfully for app:",d.app.name),t}catch(e){throw console.error("Error creating RecaptchaVerifier:",e),console.error("Auth instance details:",{exists:!!d,appName:null==d?void 0:null===(t=d.app)||void 0===t?void 0:t.name,projectId:null==d?void 0:null===(i=d.app)||void 0===i?void 0:null===(r=i.options)||void 0===r?void 0:r.projectId,apiKey:(null==d?void 0:null===(s=d.app)||void 0===s?void 0:null===(l=s.options)||void 0===l?void 0:null===(n=l.apiKey)||void 0===n?void 0:n.substring(0,10))+"..."}),Error("Failed to initialize reCAPTCHA: ".concat(e.message||"Unknown error"))}}async function s(e,t){var r,i,n,l,s,c;try{let i=o();if(!i||!i.app)throw Error("Firebase Auth is not properly initialized");console.log("\uD83D\uDCE4 Sending OTP with auth instance:",{appName:i.app.name,projectId:i.app.options.projectId,apiKey:(null===(r=i.app.options.apiKey)||void 0===r?void 0:r.substring(0,20))+"...",authDomain:i.app.options.authDomain,storageBucket:i.app.options.storageBucket,phoneNumber:e});let n="AIzaSyC4SqbxwKCJmUBNKt85UwEJgNnep9t7qOY";if(i.app.options.apiKey!==n)throw console.error("âŒ API KEY MISMATCH!"),console.error("Expected:",n),console.error("Got:",i.app.options.apiKey),Error("API key mismatch detected. Please clear browser cache and refresh.");console.log("âœ… API key verified, proceeding with OTP send...");let l=await (0,a.$g)(i,e,t);return console.log("OTP sent successfully"),l}catch(e){if(console.error("Error sending OTP:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),console.error("Auth instance at error:",{appName:null===(n=o())||void 0===n?void 0:null===(i=n.app)||void 0===i?void 0:i.name,projectId:null===(c=o())||void 0===c?void 0:null===(s=c.app)||void 0===s?void 0:null===(l=s.options)||void 0===l?void 0:l.projectId}),"auth/invalid-app-credential"===e.code)throw Error("Firebase configuration error. Please verify:\n1. API key matches Firebase project\n2. Phone Authentication is enabled\n3. Authorized domains include localhost\n4. Try refreshing the page");if("auth/too-many-requests"===e.code)throw Error("Too many requests. Please wait a moment and try again.");if("auth/invalid-phone-number"===e.code)throw Error("Invalid phone number format. Please enter a valid 10-digit mobile number.");if("auth/quota-exceeded"===e.code)throw Error("SMS quota exceeded. Please try again later.");throw Error(e.message||"Failed to send OTP. Please try again.")}}async function c(e,t){try{let r=(await e.confirm(t)).user;return r.phoneNumber&&await (0,n.XB)(r.uid,{id:r.uid,phone:r.phoneNumber}),r}catch(e){throw console.error("Error verifying OTP:",e),Error(e.message||"Invalid OTP code")}}async function d(){try{let e=o();await (0,a.w7)(e)}catch(e){throw console.error("Error signing out:",e),Error(e.message||"Failed to sign out")}}function u(e){try{let t=o();return(0,a.Aj)(t,e)}catch(e){return()=>{}}}}}]);