(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[737],{3857:function(e,a,t){Promise.resolve().then(t.bind(t,474))},474:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return v}});var l=t(7437),r=t(2265),s=t(429),i=t(5095),n=t(401),d=t(407),o=t(9376),c=t(6281),b=t(4421),m=t(5748);let u=[{value:"excellent",label:"Excellent",desc:"Like new, no scratches"},{value:"good",label:"Good",desc:"Minor wear, fully functional"},{value:"fair",label:"Fair",desc:"Visible wear, works well"},{value:"poor",label:"Poor",desc:"Heavy wear, some issues"}],x=[{value:"light",label:"Light Use",desc:"Rarely used"},{value:"moderate",label:"Moderate Use",desc:"Regular use"},{value:"heavy",label:"Heavy Use",desc:"Frequent use"}],h=[{value:"box",label:"Original Box",price:50},{value:"charger",label:"Charger",price:30},{value:"battery",label:"Extra Battery",price:40},{value:"lens",label:"Lens Included",price:200}];function g(){let e=(0,o.useSearchParams)(),a=e.get("category")||"cameras",t=e.get("brand")||"",{user:g,isAuthenticated:p}=(0,c.a)(),[f,v]=(0,r.useState)(1),[w,y]=(0,r.useState)({brand:t,model:"",condition:"",usage:"",accessories:[]}),[j,N]=(0,r.useState)(0),[E,C]=(0,r.useState)(0),[k,S]=(0,r.useState)([]),[L,H]=(0,r.useState)([]),[P,T]=(0,r.useState)([]),[Z,_]=(0,r.useState)(!0),[M,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{_(!0);let e=await (0,b.PW)(a);T(e);let t=Array.from(new Set((null==e?void 0:e.map(e=>e.brand))||[])).sort();S(t)}catch(e){console.error("Error fetching brands:",e)}finally{_(!1)}})()},[a]),(0,r.useEffect)(()=>{t&&k.length>0&&(y(e=>({...e,brand:t})),v(2),B(t))},[t,k.length]);let B=async e=>{try{let t=await (0,b.PW)(a,e),l=Array.from(new Set((null==t?void 0:t.map(e=>e.model))||[])).sort();H(l)}catch(e){console.error("Error fetching models:",e)}};(0,r.useEffect)(()=>{if(w.brand&&w.model){let e=P.find(e=>e.brand.toLowerCase()===w.brand.toLowerCase()&&e.model===w.model);e?C(e.basePrice):(0,b._v)(w.brand,w.model).then(e=>{e&&C(e.basePrice)}).catch(e=>console.error("Error fetching device price:",e))}},[w.brand,w.model,P,a]),(0,r.useEffect)(()=>{let e=E;w.condition&&(e*=({excellent:1,good:.85,fair:.65,poor:.4})[w.condition]||1),w.usage&&(e*=({light:1,moderate:.9,heavy:.75})[w.usage]||1),N(Math.round(e+=w.accessories.reduce((e,a)=>{let t=h.find(e=>e.value===a);return e+((null==t?void 0:t.price)||0)},0)))},[E,w.condition,w.usage,w.accessories]);let U=()=>{f<5&&v(f+1)},V=async e=>{y({...w,brand:e,model:""}),await B(e),1===f&&U()},$=e=>{y({...w,model:e}),2===f&&U()},F=e=>{y({...w,condition:e}),3===f&&U()},I=e=>{y({...w,usage:e}),4===f&&U()},O=e=>{y({...w,accessories:w.accessories.includes(e)?w.accessories.filter(a=>a!==e):[...w.accessories,e]})},R=[{id:1,title:"Select Brand",component:Z?(0,l.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,l.jsx)("div",{className:"w-12 h-12 border-4 border-brand-lime border-t-transparent rounded-full animate-spin"})}):(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:k.map(e=>(0,l.jsx)(s.E.button,{onClick:()=>V(e),className:"p-4 md:p-6 rounded-xl border-2 text-brand-blue-900 font-semibold capitalize transition-all ".concat(w.brand.toLowerCase()===e.toLowerCase()?"bg-gradient-to-br from-brand-blue-600 to-brand-lime text-white border-brand-lime scale-105":"bg-white border-gray-200 hover:border-brand-lime"),whileHover:{scale:1.05},whileTap:{scale:.95},children:e.charAt(0).toUpperCase()+e.slice(1)},e))})},{id:2,title:"Select Model",component:w.brand?0===L.length?(0,l.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,l.jsx)("div",{className:"w-12 h-12 border-4 border-brand-lime border-t-transparent rounded-full animate-spin"})}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:L.map(e=>(0,l.jsx)(s.E.button,{onClick:()=>$(e),className:"p-4 rounded-xl border-2 text-brand-blue-900 text-left transition-all ".concat(w.model===e?"bg-gradient-to-br from-brand-blue-600 to-brand-lime text-white border-brand-lime":"bg-white border-gray-200 hover:border-brand-lime"),whileHover:{scale:1.02},whileTap:{scale:.98},children:e},e))}):(0,l.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Please select a brand first"})},{id:3,title:"Condition",component:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(e=>(0,l.jsxs)(s.E.button,{onClick:()=>F(e.value),className:"p-4 md:p-6 rounded-xl border-2 text-brand-blue-900 text-left transition-all ".concat(w.condition===e.value?"bg-gradient-to-br from-brand-blue-600 to-brand-lime text-white border-brand-lime":"bg-white border-gray-200 hover:border-brand-lime"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,l.jsx)("div",{className:"font-semibold text-lg mb-1",children:e.label}),(0,l.jsx)("div",{className:"text-sm ".concat(w.condition===e.value?"text-white/90":"text-gray-600"),children:e.desc})]},e.value))})},{id:4,title:"Usage",component:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:x.map(e=>(0,l.jsxs)(s.E.button,{onClick:()=>I(e.value),className:"p-4 md:p-6 rounded-xl border-2 text-brand-blue-900 text-center transition-all ".concat(w.usage===e.value?"bg-gradient-to-br from-brand-blue-600 to-brand-lime text-white border-brand-lime":"bg-white border-gray-200 hover:border-brand-lime"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,l.jsx)("div",{className:"font-semibold text-lg mb-1",children:e.label}),(0,l.jsx)("div",{className:"text-sm ".concat(w.usage===e.value?"text-white/90":"text-gray-600"),children:e.desc})]},e.value))})},{id:5,title:"Accessories",component:(0,l.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,l.jsxs)(s.E.button,{onClick:()=>O(e.value),className:"w-full p-4 rounded-xl border-2 text-brand-blue-900 flex items-center justify-between transition-all ".concat(w.accessories.includes(e.value)?"bg-gradient-to-br from-brand-blue-600 to-brand-lime text-white border-brand-lime":"bg-white border-gray-200 hover:border-brand-lime"),whileHover:{scale:1.01},whileTap:{scale:.99},children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[w.accessories.includes(e.value)&&(0,l.jsx)(n.Z,{className:"w-5 h-5"}),(0,l.jsx)("span",{className:"font-semibold",children:e.label})]}),(0,l.jsxs)("span",{className:"text-brand-lime",children:["+$",e.price]})]},e.value))})}];return(0,l.jsxs)("div",{className:"min-h-screen py-8 md:py-12 px-4 pt-20 md:pt-24",children:[(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-8 md:mb-12",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2",children:[(0,l.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-brand-blue-900",children:"Trade-In Valuation"}),(0,l.jsxs)("div",{className:"text-gray-600 text-sm md:text-base",children:["Step ",f," of ",5]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,l.jsx)(s.E.div,{className:"h-full bg-gradient-to-r from-brand-blue-600 to-brand-lime",initial:{width:0},animate:{width:"".concat(f/5*100,"%")},transition:{duration:.3}})})]}),(0,l.jsx)(i.M,{mode:"wait",children:(0,l.jsxs)(s.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl md:text-2xl font-semibold text-brand-blue-900 mb-6 md:mb-8",children:R[f-1].title}),R[f-1].component]},f)}),(E>0||j>0)&&(0,l.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-8 left-1/2 -translate-x-1/2 w-full max-w-md px-4 z-50",children:(0,l.jsxs)("div",{className:"bg-gradient-to-br from-brand-blue-700 to-brand-lime-600 rounded-xl p-4 md:p-6 shadow-xl",children:[(0,l.jsx)("div",{className:"text-white/90 text-sm mb-1",children:"Estimated Value"}),p?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.E.div,{initial:{scale:1.2},animate:{scale:1},className:"text-3xl md:text-4xl font-bold text-white",children:["$",j.toLocaleString()]},j),E>0&&(0,l.jsxs)("div",{className:"text-white/80 text-xs mt-2",children:["Base: $",E.toLocaleString()]})]}):(0,l.jsx)("button",{onClick:()=>A(!0),className:"w-full mt-2 py-2 bg-white text-brand-blue-900 rounded-lg font-bold hover:bg-gray-100 transition-colors",children:"Login to View Price"})]})}),(0,l.jsxs)("div",{className:"flex justify-between gap-4 mt-8",children:[(0,l.jsx)(s.E.button,{onClick:()=>{f>1&&v(f-1)},disabled:1===f,className:"px-4 md:px-6 py-2 md:py-3 rounded-lg font-semibold transition-all text-sm md:text-base ".concat(1===f?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-2 border-gray-300 text-brand-blue-900 hover:border-brand-lime"),whileHover:f>1?{scale:1.05}:{},whileTap:f>1?{scale:.95}:{},children:"Back"}),f<5&&(0,l.jsxs)(s.E.button,{onClick:U,disabled:1===f&&!w.brand||2===f&&!w.model||3===f&&!w.condition||4===f&&!w.usage,className:"px-4 md:px-6 py-2 md:py-3 rounded-lg font-semibold flex items-center gap-2 transition-all text-sm md:text-base ".concat((1!==f||w.brand)&&(2!==f||w.model)&&(3!==f||w.condition)&&(4!==f||w.usage)?"bg-brand-lime text-brand-blue-900 hover:bg-brand-lime-400":"bg-gray-200 text-gray-400 cursor-not-allowed"),whileHover:(1!==f||w.brand)&&(2!==f||w.model)&&(3!==f||w.condition)&&(4!==f||w.usage)?{scale:1.05}:{},whileTap:(1!==f||w.brand)&&(2!==f||w.model)&&(3!==f||w.condition)&&(4!==f||w.usage)?{scale:.95}:{},children:["Next",(0,l.jsx)(d.Z,{className:"w-5 h-5"})]}),5===f&&(0,l.jsx)(s.E.button,{onClick:async()=>{try{let e=await (0,b.l$)({category:a,brand:w.brand,model:w.model,condition:w.condition,usage:w.usage,accessories:w.accessories,basePrice:E,estimatedValue:j,status:"pending",userId:(null==g?void 0:g.uid)||void 0});window.location.href="/success?id=".concat(e,"&value=").concat(j)}catch(e){console.error("Error submitting valuation:",e),alert("An error occurred. Please try again.")}},className:"px-6 md:px-8 py-2 md:py-3 rounded-lg font-semibold bg-brand-lime text-brand-blue-900 hover:bg-brand-lime-400 text-sm md:text-base",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Submit & Continue"})]})]}),M&&(0,l.jsx)(m.Z,{onSuccess:()=>A(!1),onClose:()=>A(!1)})]})}var p=t(1344);function f(){return(0,l.jsx)(g,{})}function v(){return(0,l.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(p.default,{}),(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center text-white",children:"Loading..."}),children:(0,l.jsx)(f,{})})]})}},401:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});let l=(0,t(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},407:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});let l=(0,t(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},function(e){e.O(0,[358,139,943,724,421,344,971,117,744],function(){return e(e.s=3857)}),_N_E=e.O()}]);